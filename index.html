<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>单词训练</title>
<link rel="icon" href="./resources/image/Gotcha.svg">
<style type="text/css">
	@import"./resources/css/style.css";
	@import"./resources/css/index.css";
	.u_input {
		type: text;
		text-align: center;
		width: 25px;
		}
</style>
</head>
<body>
<div class="header">
	<div class="main">单词训练</div>
</div>
<div class="root">
	<div class="root_page">
		<div class="page">
			<div class="card" id="recharge"> 
				<!--在此处div内写内容-->
				<div>
					第
					<input class="u_input" id="start" value="1" oninput="value=value.replace(/[^\d]/g,'')">
					~
					<input class="u_input" id="end" value="20" oninput="value=value.replace(/[^\d]/g,'')">个
				</div>
			</div>
			<div class="card">
				<div align="center">
					<div style="height: 80px;">
						<!-- <p style="font-size: 45px; display: block;" id="randomLine"></p> -->
						<input class="u_input" id="randomLine" type="text" style="height: 65%; width: 95%; font-size: 45px; margin: 45px 0px; display: block;" align="center" disabled>
						<input class="u_input" id="your_input" type="text" style="height: 65%; width: 95%; font-size: 45px; margin: 45px 0px; display: none;" align="center">
					</div>
					<p style="height: 140px; color: white;" id="randomLine2"></p>
				</div>
			</div>
			<div class="card" id="web_list"> 
				<!--在此处div内写内容-->
				<div>
					<input type="button" id="btn_word" value="单词已显示" onclick="changeColor1('randomLine')">
					<input type="button" id="btn_zh" value="注释已隐藏" onclick="changeColor2('randomLine2')">
				</div>
			</div>
			<div class="card" id="web_list"> 
				<!--在此处div内写内容-->
				<div>
					<input type="button" id="btn_run" value="ENTER:下一个" onclick="clickBtn()" style="height: 50px">
					<!-- <input type="button" id="btn_word" value="word" onclick="wordMode()" style="height: 50px"> -->
					<!-- <input type="button" id="btn_mean" value="mean" onclick="meanMode()" style="height: 50px"> -->
				</div>
			</div>
		   	<a href="./words.html">
				<button class="web_button">查看单词表</button>
			</a>
		</div>
	</div>
	<div class="footer">
		<div id="content" class="check"></div>
	</div>
</div>
<script type="text/javascript" src="./resources/js/index.js"></script> 
<script type="text/javascript" src="./resources/js/wordsTrain.js"></script> 
<script>
	fetch('./resources/public/version.txt') // 获取文件
	.then(response => response.text())
	.then(data => {
		document.getElementById('content').innerText = data;
	})
	.catch(error => console.error('Error:', error));

	// 判断输入框的正误
	function checkWord() {
		var targetPoint = document.getElementById("randomLine").value;
		var yourPoint = document.getElementById('your_input').value;
		if (targetPoint == yourPoint) {
			alert("√√√"); // 正确的情况下，
			readRandomOddLine();
		} else {
			alert("×××")
		}
		document.getElementById('your_input').value = "";
	}

	var isRed1 = true;  // 用来记录字体颜色是否为真，初始为真
	// 点击事件
	function clickBtn() {
		if (isRed1 == true) {
			readRandomOddLine();
		} else {
			checkWord();
		}
	}

	// 切换字体颜色
	function changeColor1(itemID) {
		var a = document.getElementById(itemID);
		if (isRed1) {
			a.style.color = "white";  // 更改文本颜色为假
			isRed1 = false;
			document.getElementById("btn_word").value = "单词已隐藏";
		} else {
			a.style.color = "#1f2233";  // 更改文本颜色为真
			isRed1 = true;
			document.getElementById("btn_word").value = "单词已显示"
		}
	
		// 获取两个交替显示的标签的ID
		var input1 = document.getElementById("randomLine");
		var input2 = document.getElementById("your_input");
		if (input1.style.display === "none") {  // 如果01为不显示，改为01显示，02不显示
			input1.style.display = "block";
			input2.style.display = "none";
		} else {  // 如果01为显示，改为01不显示，02显示
			input1.style.display = "none";
			input2.style.display = "block";
		}
	}

	var isRed2 = false;
	function changeColor2(itemID) {
		var a = document.getElementById(itemID);
		if (isRed2) {
			a.style.color = "white"; // 更改文本颜色为假
			isRed2 = false;
			document.getElementById("btn_zh").value = "注释已隐藏";
		} else {
			a.style.color = "#1f2233"; // 更改文本颜色为真
			isRed2 = true;
			document.getElementById("btn_zh").value = "注释已显示";
		}
	}

	// 生成 min ~ max 之间的随机数
	function getRandomOddNumber(min, max) {
		var num = Math.floor(Math.random() * (max - min + 1)) + min;
		return num;
	}

	// 随机插入 start 到 end 之间的项
	function readRandomOddLine() {
		var start = parseInt(document.getElementById('start').value, 10);
		var end = parseInt(document.getElementById('end').value, 10);
		fetch('trainDict.txt')
		.then(response => response.text())
		.then(data => {
			var lines = data.split('\n'); // 将文件内容分割成行
			var randomOddLine = getRandomOddNumber(start, end); // 会给出 start 到 end 范围的数字
			document.getElementById('randomLine').value = lines[randomOddLine*2-2];
			document.getElementById('randomLine2').innerHTML = lines[randomOddLine*2-1];
		});
	}
	readRandomOddLine();

	// 背单词模式（暂时没使用）
	function wordMode(){
		var input1 = document.getElementById("randomLine");
		var input2 = document.getElementById("randomLine2");
			input1.style.color = "black";
			input2.style.color = "white";
	}

	// 记意思模式（暂时没使用）
	function meanMode(){
		var input1 = document.getElementById("randomLine");
		var input2 = document.getElementById("randomLine2");
			input1.style.color = "#f8f8f8";
			input2.style.color = "black";
	}

	// 获取按钮元素
	var button = document.getElementById("btn_run");
 
	// 当按钮被点击时执行的函数
	function handleClick() {
		clickBtn();
	}
 
	// 当按下Enter键时执行的函数
	document.addEventListener('keydown', function(event) {
    	if (event.code === 'Enter') {
        	event.preventDefault(); // 防止默认提交表单等动作发生
        	handleClick(); // 调用按钮被点击时的函数
    	}
	});
 
	// 将按钮点击事件与handleClick函数关联起来
	button.onclick = handleClick;

</script>
</body>
</html>
<!--
<div align="center">
  <video width="300" height="375" controls>
	<source src="https://api.keepwork.com/ts-storage/siteFiles/23723/raw#findme.mp4" type="video/mp4">
  </video>
</div>
-->